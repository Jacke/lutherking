import { db } from '../drizzle/db';
import { challenges, users } from '../drizzle/schema';
import bcrypt from 'bcryptjs';

async function seed() {
  console.log('ðŸŒ± Starting database seed...');

  // Seed challenges
  const challengesData = [
    {
      title: '2-Ð¼Ð¸Ð½ÑƒÑ‚Ð½Ð°Ñ Ð¿Ñ€ÐµÐ·ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ñ Ð¿Ñ€Ð¾Ð´ÑƒÐºÑ‚Ð°',
      description: 'ÐŸÑ€ÐµÐ´ÑÑ‚Ð°Ð²ÑŒÑ‚Ðµ Ð²Ð°Ñˆ Ð¿Ñ€Ð¾Ð´ÑƒÐºÑ‚ Ð¸Ð»Ð¸ ÑƒÑÐ»ÑƒÐ³Ñƒ Ð·Ð° 2 Ð¼Ð¸Ð½ÑƒÑ‚Ñ‹. Ð Ð°ÑÑÐºÐ°Ð¶Ð¸Ñ‚Ðµ Ð¾ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ðµ, Ñ€ÐµÑˆÐµÐ½Ð¸Ð¸ Ð¸ ÑƒÐ½Ð¸ÐºÐ°Ð»ÑŒÐ½Ð¾Ð¼ Ð¿Ñ€ÐµÐ´Ð»Ð¾Ð¶ÐµÐ½Ð¸Ð¸.',
    },
    {
      title: 'ÐžÑ‚Ð²ÐµÑ‚ Ð½Ð° Ð¶Ñ‘ÑÑ‚ÐºÐ¸Ð¹ Ð²Ð¾Ð¿Ñ€Ð¾Ñ Ð¸Ð½Ð²ÐµÑÑ‚Ð¾Ñ€Ð°',
      description: 'ÐŸÑ€ÐµÐ´ÑÑ‚Ð°Ð²ÑŒÑ‚Ðµ, Ñ‡Ñ‚Ð¾ Ð¸Ð½Ð²ÐµÑÑ‚Ð¾Ñ€ ÑÐ¿Ñ€Ð¾ÑÐ¸Ð»: "ÐŸÐ¾Ñ‡ÐµÐ¼Ñƒ Ð²Ñ‹, Ð° Ð½Ðµ ÐºÐ¾Ð½ÐºÑƒÑ€ÐµÐ½Ñ‚Ñ‹?". Ð”Ð°Ð¹Ñ‚Ðµ ÑƒÐ±ÐµÐ´Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ð¹ Ð¾Ñ‚Ð²ÐµÑ‚ Ð·Ð° 90 ÑÐµÐºÑƒÐ½Ð´.',
    },
    {
      title: 'Ð Ð°ÑÑÐºÐ°Ð· Ð¾ ÑÐµÐ±Ðµ Ð½Ð° ÑÐ¾Ð±ÐµÑÐµÐ´Ð¾Ð²Ð°Ð½Ð¸Ð¸',
      description: 'ÐšÐ»Ð°ÑÑÐ¸Ñ‡ÐµÑÐºÐ¸Ð¹ Ð²Ð¾Ð¿Ñ€Ð¾Ñ "Ð Ð°ÑÑÐºÐ°Ð¶Ð¸Ñ‚Ðµ Ð¾ ÑÐµÐ±Ðµ". Ð£ Ð²Ð°Ñ ÐµÑÑ‚ÑŒ 2 Ð¼Ð¸Ð½ÑƒÑ‚Ñ‹, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¿Ñ€Ð¾Ð¸Ð·Ð²ÐµÑÑ‚Ð¸ Ð²Ð¿ÐµÑ‡Ð°Ñ‚Ð»ÐµÐ½Ð¸Ðµ.',
    },
    {
      title: 'Elevator Pitch Ð·Ð° 60 ÑÐµÐºÑƒÐ½Ð´',
      description: 'ÐŸÑ€ÐµÐ´ÑÑ‚Ð°Ð²ÑŒÑ‚Ðµ, Ñ‡Ñ‚Ð¾ Ð²Ñ‹ Ð² Ð»Ð¸Ñ„Ñ‚Ðµ Ñ Ð¿Ð¾Ñ‚ÐµÐ½Ñ†Ð¸Ð°Ð»ÑŒÐ½Ñ‹Ð¼ Ð¸Ð½Ð²ÐµÑÑ‚Ð¾Ñ€Ð¾Ð¼. Ð Ð°ÑÑÐºÐ°Ð¶Ð¸Ñ‚Ðµ Ð¾ ÑÐ²Ð¾ÐµÐ¹ Ð¸Ð´ÐµÐµ Ð·Ð° 60 ÑÐµÐºÑƒÐ½Ð´.',
    },
    {
      title: 'Ð£Ð±ÐµÐ´Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð°Ñ Ñ€ÐµÑ‡ÑŒ Ð·Ð° 90 ÑÐµÐºÑƒÐ½Ð´',
      description: 'Ð£Ð±ÐµÐ´Ð¸Ñ‚Ðµ Ð°ÑƒÐ´Ð¸Ñ‚Ð¾Ñ€Ð¸ÑŽ Ð² Ð²Ð°Ð¶Ð½Ð¾ÑÑ‚Ð¸ Ð²Ð°ÑˆÐµÐ¹ Ð¸Ð´ÐµÐ¸ Ð¸Ð»Ð¸ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°. Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ ÑÐ¼Ð¾Ñ†Ð¸Ð¸ Ð¸ Ñ„Ð°ÐºÑ‚Ñ‹.',
    },
    {
      title: 'ÐžÐ±ÑŠÑÑÐ½ÐµÐ½Ð¸Ðµ ÑÐ»Ð¾Ð¶Ð½Ð¾Ð¹ Ñ‚ÐµÐ¼Ñ‹ Ð¿Ñ€Ð¾ÑÑ‚Ñ‹Ð¼ ÑÐ·Ñ‹ÐºÐ¾Ð¼',
      description: 'Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ ÑÐ»Ð¾Ð¶Ð½ÑƒÑŽ Ñ‚ÐµÑ…Ð½Ð¸Ñ‡ÐµÑÐºÑƒÑŽ Ñ‚ÐµÐ¼Ñƒ Ð¸ Ð¾Ð±ÑŠÑÑÐ½Ð¸Ñ‚Ðµ ÐµÑ‘ Ñ‚Ð°Ðº, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¿Ð¾Ð½ÑÐ» Ñ€ÐµÐ±Ñ‘Ð½Ð¾Ðº.',
    },
    {
      title: 'Presentation Opening (Ð¾Ñ‚ÐºÑ€Ñ‹Ñ‚Ð¸Ðµ Ð¿Ñ€ÐµÐ·ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ð¸)',
      description: 'ÐŸÐµÑ€Ð²Ñ‹Ðµ 60 ÑÐµÐºÑƒÐ½Ð´ Ð¿Ñ€ÐµÐ·ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ð¸ - ÑÐ°Ð¼Ñ‹Ðµ Ð²Ð°Ð¶Ð½Ñ‹Ðµ. Ð—Ð°Ñ…Ð²Ð°Ñ‚Ð¸Ñ‚Ðµ Ð²Ð½Ð¸Ð¼Ð°Ð½Ð¸Ðµ Ð°ÑƒÐ´Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¸ Ñ Ð¿ÐµÑ€Ð²Ñ‹Ñ… ÑÐ»Ð¾Ð².',
    },
    {
      title: 'ÐžÐ±Ñ€Ð°Ñ‚Ð½Ð°Ñ ÑÐ²ÑÐ·ÑŒ ÐºÐ¾Ð»Ð»ÐµÐ³Ðµ',
      description: 'Ð”Ð°Ð¹Ñ‚Ðµ ÐºÐ¾Ð½ÑÑ‚Ñ€ÑƒÐºÑ‚Ð¸Ð²Ð½ÑƒÑŽ Ð¾Ð±Ñ€Ð°Ñ‚Ð½ÑƒÑŽ ÑÐ²ÑÐ·ÑŒ ÐºÐ¾Ð»Ð»ÐµÐ³Ðµ Ð¾ ÐµÐ³Ð¾ Ñ€Ð°Ð±Ð¾Ñ‚Ðµ. Ð‘ÑƒÐ´ÑŒÑ‚Ðµ Ñ‡ÐµÑÑ‚Ð½Ñ‹, Ð½Ð¾ Ñ‚Ð°ÐºÑ‚Ð¸Ñ‡Ð½Ñ‹.',
    },
    {
      title: 'Ð˜Ð¼Ð¿Ñ€Ð¾Ð²Ð¸Ð·Ð°Ñ†Ð¸Ñ Ð½Ð° Ð·Ð°Ð´Ð°Ð½Ð½ÑƒÑŽ Ñ‚ÐµÐ¼Ñƒ',
      description: 'ÐŸÐ¾Ð»ÑƒÑ‡Ð¸Ñ‚Ðµ ÑÐ»ÑƒÑ‡Ð°Ð¹Ð½ÑƒÑŽ Ñ‚ÐµÐ¼Ñƒ Ð¸ Ð³Ð¾Ð²Ð¾Ñ€Ð¸Ñ‚Ðµ Ð½Ð° Ð½ÐµÑ‘ 90 ÑÐµÐºÑƒÐ½Ð´ Ð±ÐµÐ· Ð¿Ð¾Ð´Ð³Ð¾Ñ‚Ð¾Ð²ÐºÐ¸.',
    },
    {
      title: 'ÐœÐ¾Ñ‚Ð¸Ð²Ð°Ñ†Ð¸Ð¾Ð½Ð½Ð°Ñ Ñ€ÐµÑ‡ÑŒ ÐºÐ¾Ð¼Ð°Ð½Ð´Ðµ',
      description: 'Ð’Ð´Ð¾Ñ…Ð½Ð¾Ð²Ð¸Ñ‚Ðµ ÑÐ²Ð¾ÑŽ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñƒ Ð¿ÐµÑ€ÐµÐ´ Ð²Ð°Ð¶Ð½Ñ‹Ð¼ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð¾Ð¼ Ð¸Ð»Ð¸ Ð² ÑÐ»Ð¾Ð¶Ð½Ð¾Ð¹ ÑÐ¸Ñ‚ÑƒÐ°Ñ†Ð¸Ð¸.',
    },
    {
      title: 'Product Demo (Ð´ÐµÐ¼Ð¾Ð½ÑÑ‚Ñ€Ð°Ñ†Ð¸Ñ Ð¿Ñ€Ð¾Ð´ÑƒÐºÑ‚Ð°)',
      description: 'ÐŸÑ€Ð¾Ð²ÐµÐ´Ð¸Ñ‚Ðµ ÐºÑ€Ð°Ñ‚ÐºÑƒÑŽ Ð´ÐµÐ¼Ð¾Ð½ÑÑ‚Ñ€Ð°Ñ†Ð¸ÑŽ Ð²Ð°ÑˆÐµÐ³Ð¾ Ð¿Ñ€Ð¾Ð´ÑƒÐºÑ‚Ð° Ð´Ð»Ñ Ð¿Ð¾Ñ‚ÐµÐ½Ñ†Ð¸Ð°Ð»ÑŒÐ½Ð¾Ð³Ð¾ ÐºÐ»Ð¸ÐµÐ½Ñ‚Ð°.',
    },
    {
      title: 'ÐžÑ‚Ð²ÐµÑ‚ Ð½Ð° Ð²Ð¾Ð·Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ ÐºÐ»Ð¸ÐµÐ½Ñ‚Ð°',
      description: 'ÐšÐ»Ð¸ÐµÐ½Ñ‚ Ð³Ð¾Ð²Ð¾Ñ€Ð¸Ñ‚ "Ð¡Ð»Ð¸ÑˆÐºÐ¾Ð¼ Ð´Ð¾Ñ€Ð¾Ð³Ð¾". ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ð¹Ñ‚Ðµ ÑÑ‚Ð¾ Ð²Ð¾Ð·Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ ÑƒÐ±ÐµÐ´Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾.',
    },
    {
      title: 'TED-style Talk (Ð²ÑÑ‚ÑƒÐ¿Ð»ÐµÐ½Ð¸Ðµ)',
      description: 'ÐÐ°Ñ‡Ð½Ð¸Ñ‚Ðµ Ð²Ñ‹ÑÑ‚ÑƒÐ¿Ð»ÐµÐ½Ð¸Ðµ Ð² ÑÑ‚Ð¸Ð»Ðµ TED Talk. Ð¡Ð¸Ð»ÑŒÐ½Ð¾Ðµ Ð½Ð°Ñ‡Ð°Ð»Ð¾, Ð»Ð¸Ñ‡Ð½Ð°Ñ Ð¸ÑÑ‚Ð¾Ñ€Ð¸Ñ, big idea.',
    },
    {
      title: 'Pitch Ð´Ð»Ñ ÐºÑ€Ð°ÑƒÐ´Ñ„Ð°Ð½Ð´Ð¸Ð½Ð³Ð°',
      description: 'Ð£Ð±ÐµÐ´Ð¸Ñ‚Ðµ Ð»ÑŽÐ´ÐµÐ¹ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶Ð°Ñ‚ÑŒ Ð²Ð°Ñˆ Ð¿Ñ€Ð¾ÐµÐºÑ‚ Ð½Ð° Kickstarter Ð¸Ð»Ð¸ Ð°Ð½Ð°Ð»Ð¾Ð³Ð¸Ñ‡Ð½Ð¾Ð¹ Ð¿Ð»Ð°Ñ‚Ñ„Ð¾Ñ€Ð¼Ðµ.',
    },
    {
      title: 'Ð—Ð°Ñ‰Ð¸Ñ‚Ð° Ð´Ð¸Ð¿Ð»Ð¾Ð¼Ð½Ð¾Ð³Ð¾ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°',
      description: 'ÐŸÑ€ÐµÐ´ÑÑ‚Ð°Ð²ÑŒÑ‚Ðµ ÑÐ²Ð¾Ð¹ Ð¿Ñ€Ð¾ÐµÐºÑ‚ ÐºÐ¾Ð¼Ð¸ÑÑÐ¸Ð¸. Ð¦ÐµÐ»ÑŒ, Ð¼ÐµÑ‚Ð¾Ð´Ð¾Ð»Ð¾Ð³Ð¸Ñ, Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ñ‹ Ð·Ð° 2 Ð¼Ð¸Ð½ÑƒÑ‚Ñ‹.',
    },
  ];

  try {
    console.log('ðŸ“ Seeding challenges...');
    for (const challenge of challengesData) {
      await db.insert(challenges).values({
        title: challenge.title,
        description: challenge.description,
        // createdAt will use default value
      }).run();
    }
    console.log(`âœ… Seeded ${challengesData.length} challenges`);

    // Create test user
    console.log('ðŸ‘¤ Creating test user...');
    const hashedPassword = await bcrypt.hash('test123', 10);

    try {
      await db.insert(users).values({
        email: 'test@orator.ai',
        password: hashedPassword,
        credits: 10, // Give 10 free credits for testing
        // createdAt will use default value
      }).run();
      console.log('âœ… Test user created: test@orator.ai / test123 (10 credits)');
    } catch (error: any) {
      if (error.message?.includes('UNIQUE constraint failed')) {
        console.log('â„¹ï¸  Test user already exists');
      } else {
        throw error;
      }
    }

    console.log('ðŸŽ‰ Seeding completed successfully!');
  } catch (error) {
    console.error('âŒ Seeding failed:', error);
    throw error;
  }
}

seed()
  .then(() => process.exit(0))
  .catch((error) => {
    console.error(error);
    process.exit(1);
  });
